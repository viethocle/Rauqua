<!-- //show -->
<div id="main-product" class="col-md-12">
  <!-- //add user -->
  <div class="tableTools-container">
    <button type="button" class="btn btn-primary create-product" (click)="modal.open()">Tạo người dùng</button>
  </div>

  <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="row-border hover">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Email</th>
        <th>role</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of users">
        <td>{{ user.id }}</td>
        <td>{{ user.username }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.user_role.name }}</td>
        <td>
          <button (click)="openModalEdit(user)"> edit </button>
          <button (click)="deleteUser(user.id)"> delete </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>


<bs-modal #modal>
  <bs-modal-header [showDismiss]="true">
    <h4 class="modal-title">Tạo mới người dùng</h4>
  </bs-modal-header>
  <bs-modal-body>
    <app-input-field [attribute]="'Tên'" [control]="form.get('name')">
    </app-input-field>

    <app-input-field [attribute]="'Email'" [control]="form.get('email')">
    </app-input-field>

    <app-input-field [attribute]="'Mật khẩu'" [control]="form.get('password')" [type]="'password'">
    </app-input-field>

    <app-input-field [attribute]="'Nhập lại mật khẩu'" [control]="form.get('password_confirmation')" [type]="'password'">
    </app-input-field>
    <app-error-label [control]="form"></app-error-label>

    <div class="control-group">
      <label for="">Vai trò</label>
      <!-- choose manager -->
      <div class="radio">
        <label>
          <input [formControl]="form.get('role')" type="radio" class="ace" name="form-field-radio" [value]="'mod'">
          <span class="lbl">
            Quản lý
          </span>
        </label>
      </div>
      <!-- Choose staff -->
      <div class="radio">
        <label>
          <input [formControl]="form.get('role')" type="radio" class="ace" name="form-field-radio" [value]="'provider'">
          <span class="lbl">
            Nhà cung cấp
          </span>
        </label>
      </div>
      <!-- Choose staff -->
      <div class="radio">
        <label>
          <input [formControl]="form.get('role')" type="radio" class="ace" name="form-field-radio" [value]="'admin'">
          <span class="lbl">
            Admin
          </span>
        </label>
      </div>
    </div>

  </bs-modal-body>
  <bs-modal-footer>
    <button type="button" class="btn btn-default" data-dismiss="modal" (click)="modal.dismiss()">Hủy bỏ</button>
    <button id="btn-create-user" class="btn btn-primary add-product" [disabled]="form.invalid" (click)="addUser(form.value)">Tạo
      mới</button>
  </bs-modal-footer>
</bs-modal>

<!-- //edit user -->
<bs-modal #modalEdit>
  <bs-modal-header [showDismiss]="true">
    <h4 class="modal-title">Chỉnh sửa thông tin</h4>
  </bs-modal-header>

  <bs-modal-body>

    <app-input-field [attribute]="'Tên'" [control]="formEdit.get('name')">
    </app-input-field>

    <app-input-field [attribute]="'Email'" [control]="formEdit.get('email')">
    </app-input-field>

    <app-input-field [attribute]="'Mật Khẩu'" [control]="formEdit.get('password')" [type]="'password'">
    </app-input-field>

    <app-input-field [attribute]="'Xác thực mật khẩu'" [control]="formEdit.get('password_confirmation')" [type]="'password'">
    </app-input-field>
    <app-error-label [control]="formEdit"></app-error-label>

    <div class="control-group">
      <label for="">Vai trò</label>
      <!-- choose manager -->
      <div class="radio">
        <label>
          <input [formControl]="formEdit.get('role')" type="radio" class="ace" name="edit-user-radio" [value]="'mod'">
          <span class="lbl">
            Quản lý
          </span>
        </label>
      </div>
      <!-- Choose staff -->
      <div class="radio">
        <label>
          <input [formControl]="formEdit.get('role')" type="radio" class="ace" name="edit-user-radio" [value]="'provider'">
          <span class="lbl">
            Nhà cung cấp
          </span>
        </label>
      </div>
      <!-- Choose staff -->
      <div class="radio">
        <label>
          <input [formControl]="formEdit.get('role')" type="radio" class="ace" name="edit-user-radio" [value]="'admin'">
          <span class="lbl">
            Admin
          </span>
        </label>
      </div>
    </div>
  </bs-modal-body>

  <bs-modal-footer>
    <button type="button" class="btn btn-default" data-dismiss="modal" (click)="modalEdit.dismiss()">Hủy bỏ</button>
    <button id="btn-create-user" class="btn btn-primary add-product" [disabled]="formEdit.invalid" (click)="updateUser(formEdit.value)">Cập
      nhật</button>
  </bs-modal-footer>
</bs-modal>
