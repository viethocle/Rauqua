<div id="main-product" class="col-md-12">
  <div id="dynamic-table_wrapper_wrapper" class="dataTables_wrapper form-inline no-footer">
    <div class="row">
      <div class="col-xs-9">
        <div class="dataTables_length" id="dynamic-table_wrapper_length">
          <label>Hiển thị
            <select (change)="onChangeCount($event)" [(ngModel)]="configPagination.itemsPerPage" name="dynamic-table_wrapper_length"
              aria-controls="dynamic-table_wrapper" class="form-control input-sm">
              <option value="10">10</option>
              <option value="25">25</option>
              <option value="50">50</option>
              <option value="100">100</option>
            </select>
            dòng</label>
        </div>
      </div>
      <div class="col-xs-3">
        <div class="input-group">
          <input type="text" id="search-product" class="form-control search-query" placeholder="Tìm kiếm:">
          <span class="input-group-btn">
            <button type="button" class="btn btn-inverse btn-white">
              <span class="ace-icon fa fa-search icon-on-right bigger-110"></span>
            </button>
          </span>
        </div>
      </div>
    </div>
    <table id="dynamic-table_wrapper" class="table table-striped table-bordered table-hover dataTable no-footer"
      cellspacing="0" width="100%">
      <thead>
        <tr>
          <th>ID</th>
          <th>Tên Khách hàng</th>
          <th>Thời gian giao hàng</th>
          <th>Trạng thái đơn hàng</th>
          <th>Trạng thái thanh toán</th>
          <th>Hình thức thanh toán</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let order of orders| paginate: { itemsPerPage: 10, currentPage: configPagination.currentPage, totalItems: configPagination.totalItems }">
          <td>{{ order?.id }}</td>
          <td>{{ order?.user?.fullname }}</td>
          <td>{{ order?.delivery_time | date}}</td>
          <td>
            <div class="btn-group">
              <button data-toggle="dropdown" class="btn btn-sm dropdown-toggle" [ngClass]="{
              'btn-danger':  order?.process_status?.name  == statusOrder.ready,
              'btn-warning': order?.process_status?.name  == statusOrder.todo,
              'btn-success':  order?.process_status?.name  == statusOrder.done,
              'btn-sm':  order?.process_status?.name  == statusOrder.cancel}">
                {{ order?.process_status?.name }}
                <i class="ace-icon fa fa-angle-down icon-on-right"></i>
              </button>
              <ul class="dropdown-menu">
                <li>
                  <a *ngIf="order?.process_status?.name != statusOrder.ready" class="btn-danger" (click)="updateStatus(order, statusOrder.ready)">{{statusOrder.ready}}</a>
                </li>
                <li>
                  <a *ngIf="order?.process_status?.name != statusOrder.todo" class="btn-warning" (click)="updateStatus(order, statusOrder.todo)">{{statusOrder.todo}}</a>
                </li>
                <li>
                  <a *ngIf="order?.process_status?.name != statusOrder.done" class="btn-success" (click)="updateStatus(order, statusOrder.done)">{{statusOrder.done}}</a>
                </li>
                <li>
                  <a *ngIf="order?.process_status?.name != statusOrder.cancel" class="btn-sm" (click)="updateStatus(order, statusOrder.cancel)">{{statusOrder.cancel}}</a>
                </li>
              </ul>
            </div>
          </td>
          <td>
            <div class="btn-group">
              <button data-toggle="dropdown" class="btn btn-sm dropdown-toggle" [ngClass]="{
              'btn-warning': order?.payment_status  == statusPayment.no,
              'btn-success':  order?.payment_status  == statusPayment.yes}">
                {{ order?.payment_status }}
                <i class="ace-icon fa fa-angle-down icon-on-right"></i>
              </button>
              <ul class="dropdown-menu">
                  <li>
                    <a *ngIf="order?.payment_status != statusPayment.no" class="btn-warning" (click)="updatePayment(order,  statusPayment.no)">{{ statusPayment.no}}</a>
                  </li>
                  <li>
                    <a *ngIf="order?.payment_status != statusPayment.yes" class="btn-success" (click)="updatePayment(order,  statusPayment.yes)">{{ statusPayment.yes}}</a>
                  </li>
                </ul>
            </div>
          </td>
          <td>{{ order?.payment_method?.name}}</td>
          <td class="center">
            <button class="btn btn-xs btn-danger" tooltip="{{ 'Xóa' }}" (click)="deleteorder(order.id)">
              <i class="ace-icon fa fa-trash-o bigger-120"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    <br>
    <pagination-controls (pageChange)="getPage($event)"></pagination-controls>
  </div>
</div>
